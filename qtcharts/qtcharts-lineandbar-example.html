<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html>
<html lang="en">
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<!-- examples-lineandbarchart.qdoc -->
  <title>Line and BarChart Example | Qt Charts 5.7</title>
  <link rel="stylesheet" type="text/css" href="style/offline-simple.css" />
  <script type="text/javascript">
    window.onload = function(){document.getElementsByTagName("link").item(0).setAttribute("href", "style/offline.css");};
  </script>
</head>
<body>
<div class="header" id="qtdocheader">
  <div class="main">
    <div class="main-rounded">
      <div class="navigationbar">
        <table><tr>
<td ><a href="../qtdoc/supported-platforms-and-configurations.html#qt-5-7">Qt 5.7</a></td><td ><a href="qtcharts-index.html">Qt Charts</a></td><td >Line and BarChart Example</td></tr></table><table class="buildversion"><tr>
<td id="buildversion" width="100%" align="right">Qt 5.7.0 参考文档</td>
        </tr></table>
      </div>
    </div>
<div class="content">
<div class="line">
<div class="content mainContent">
<div class="sidebar"><div class="sidebar-content" id="sidebar-content"></div></div>
<h1 class="title">Line and BarChart Example</h1>
<span class="subtitle"></span>
<!-- $$$lineandbar-description -->
<div class="descr"> <a name="details"></a>
<p>In the example we combine a linechart with a barchart and use the category axis as a common axis for both.</p>
<p class="centerAlign"><img src="images/examples_lineandbar.png" alt="" /></p><p>Here we create data for our bar series.</p>
<pre class="cpp">

      <span class="type"><a href="qbarset.html">QBarSet</a></span> <span class="operator">*</span>set0 <span class="operator">=</span> <span class="keyword">new</span> <span class="type"><a href="qbarset.html">QBarSet</a></span>(<span class="string">&quot;Jane&quot;</span>);
      <span class="type"><a href="qbarset.html">QBarSet</a></span> <span class="operator">*</span>set1 <span class="operator">=</span> <span class="keyword">new</span> <span class="type"><a href="qbarset.html">QBarSet</a></span>(<span class="string">&quot;John&quot;</span>);
      <span class="type"><a href="qbarset.html">QBarSet</a></span> <span class="operator">*</span>set2 <span class="operator">=</span> <span class="keyword">new</span> <span class="type"><a href="qbarset.html">QBarSet</a></span>(<span class="string">&quot;Axel&quot;</span>);
      <span class="type"><a href="qbarset.html">QBarSet</a></span> <span class="operator">*</span>set3 <span class="operator">=</span> <span class="keyword">new</span> <span class="type"><a href="qbarset.html">QBarSet</a></span>(<span class="string">&quot;Mary&quot;</span>);
      <span class="type"><a href="qbarset.html">QBarSet</a></span> <span class="operator">*</span>set4 <span class="operator">=</span> <span class="keyword">new</span> <span class="type"><a href="qbarset.html">QBarSet</a></span>(<span class="string">&quot;Sam&quot;</span>);

      <span class="operator">*</span>set0 <span class="operator">&lt;</span><span class="operator">&lt;</span> <span class="number">1</span> <span class="operator">&lt;</span><span class="operator">&lt;</span> <span class="number">2</span> <span class="operator">&lt;</span><span class="operator">&lt;</span> <span class="number">3</span> <span class="operator">&lt;</span><span class="operator">&lt;</span> <span class="number">4</span> <span class="operator">&lt;</span><span class="operator">&lt;</span> <span class="number">5</span> <span class="operator">&lt;</span><span class="operator">&lt;</span> <span class="number">6</span>;
      <span class="operator">*</span>set1 <span class="operator">&lt;</span><span class="operator">&lt;</span> <span class="number">5</span> <span class="operator">&lt;</span><span class="operator">&lt;</span> <span class="number">0</span> <span class="operator">&lt;</span><span class="operator">&lt;</span> <span class="number">0</span> <span class="operator">&lt;</span><span class="operator">&lt;</span> <span class="number">4</span> <span class="operator">&lt;</span><span class="operator">&lt;</span> <span class="number">0</span> <span class="operator">&lt;</span><span class="operator">&lt;</span> <span class="number">7</span>;
      <span class="operator">*</span>set2 <span class="operator">&lt;</span><span class="operator">&lt;</span> <span class="number">3</span> <span class="operator">&lt;</span><span class="operator">&lt;</span> <span class="number">5</span> <span class="operator">&lt;</span><span class="operator">&lt;</span> <span class="number">8</span> <span class="operator">&lt;</span><span class="operator">&lt;</span> <span class="number">13</span> <span class="operator">&lt;</span><span class="operator">&lt;</span> <span class="number">8</span> <span class="operator">&lt;</span><span class="operator">&lt;</span> <span class="number">5</span>;
      <span class="operator">*</span>set3 <span class="operator">&lt;</span><span class="operator">&lt;</span> <span class="number">5</span> <span class="operator">&lt;</span><span class="operator">&lt;</span> <span class="number">6</span> <span class="operator">&lt;</span><span class="operator">&lt;</span> <span class="number">7</span> <span class="operator">&lt;</span><span class="operator">&lt;</span> <span class="number">3</span> <span class="operator">&lt;</span><span class="operator">&lt;</span> <span class="number">4</span> <span class="operator">&lt;</span><span class="operator">&lt;</span> <span class="number">5</span>;
      <span class="operator">*</span>set4 <span class="operator">&lt;</span><span class="operator">&lt;</span> <span class="number">9</span> <span class="operator">&lt;</span><span class="operator">&lt;</span> <span class="number">7</span> <span class="operator">&lt;</span><span class="operator">&lt;</span> <span class="number">5</span> <span class="operator">&lt;</span><span class="operator">&lt;</span> <span class="number">3</span> <span class="operator">&lt;</span><span class="operator">&lt;</span> <span class="number">1</span> <span class="operator">&lt;</span><span class="operator">&lt;</span> <span class="number">2</span>;

</pre>
<p>We create a bar series and append sets to it. The first values of each set are grouped together in the first category, the second values in the second category and so on.</p>
<pre class="cpp">

      <span class="type"><a href="qbarseries.html">QBarSeries</a></span> <span class="operator">*</span>barseries <span class="operator">=</span> <span class="keyword">new</span> <span class="type"><a href="qbarseries.html">QBarSeries</a></span>();
      barseries<span class="operator">-</span><span class="operator">&gt;</span>append(set0);
      barseries<span class="operator">-</span><span class="operator">&gt;</span>append(set1);
      barseries<span class="operator">-</span><span class="operator">&gt;</span>append(set2);
      barseries<span class="operator">-</span><span class="operator">&gt;</span>append(set3);
      barseries<span class="operator">-</span><span class="operator">&gt;</span>append(set4);

</pre>
<p>Then we create a line series and add data to it. To make the data match with the barchart, we use the index as an x-value for our line series, so that first point is at (0,value) second at (1,value) and so on.</p>
<pre class="cpp">

      <span class="type"><a href="qlineseries.html">QLineSeries</a></span> <span class="operator">*</span>lineseries <span class="operator">=</span> <span class="keyword">new</span> <span class="type"><a href="qlineseries.html">QLineSeries</a></span>();
      lineseries<span class="operator">-</span><span class="operator">&gt;</span>setName(<span class="string">&quot;trend&quot;</span>);
      lineseries<span class="operator">-</span><span class="operator">&gt;</span>append(<span class="type"><a href="../qtcore/qpoint.html">QPoint</a></span>(<span class="number">0</span><span class="operator">,</span> <span class="number">4</span>));
      lineseries<span class="operator">-</span><span class="operator">&gt;</span>append(<span class="type"><a href="../qtcore/qpoint.html">QPoint</a></span>(<span class="number">1</span><span class="operator">,</span> <span class="number">15</span>));
      lineseries<span class="operator">-</span><span class="operator">&gt;</span>append(<span class="type"><a href="../qtcore/qpoint.html">QPoint</a></span>(<span class="number">2</span><span class="operator">,</span> <span class="number">20</span>));
      lineseries<span class="operator">-</span><span class="operator">&gt;</span>append(<span class="type"><a href="../qtcore/qpoint.html">QPoint</a></span>(<span class="number">3</span><span class="operator">,</span> <span class="number">4</span>));
      lineseries<span class="operator">-</span><span class="operator">&gt;</span>append(<span class="type"><a href="../qtcore/qpoint.html">QPoint</a></span>(<span class="number">4</span><span class="operator">,</span> <span class="number">12</span>));
      lineseries<span class="operator">-</span><span class="operator">&gt;</span>append(<span class="type"><a href="../qtcore/qpoint.html">QPoint</a></span>(<span class="number">5</span><span class="operator">,</span> <span class="number">17</span>));

</pre>
<p>Here we create the chart and add both series to it.</p>
<pre class="cpp">

      <span class="type"><a href="qchart.html">QChart</a></span> <span class="operator">*</span>chart <span class="operator">=</span> <span class="keyword">new</span> <span class="type"><a href="qchart.html">QChart</a></span>();
      chart<span class="operator">-</span><span class="operator">&gt;</span>addSeries(barseries);
      chart<span class="operator">-</span><span class="operator">&gt;</span>addSeries(lineseries);
      chart<span class="operator">-</span><span class="operator">&gt;</span>setTitle(<span class="string">&quot;Line and barchart example&quot;</span>);

</pre>
<p>To make the chart show the series properly, we have to create custom axes for the series. If we don't create custom axes, then each series will get scaled to use the maximum area of the chart (like in single series case) and the result will be incorrect. With custom axes we set the range of both series to follow the same axis. For the x-axis we use the <a href="qbarcategoryaxis.html">QBarCategoryAxis</a> and for the y-axis we use QValuesAxis.</p>
<pre class="cpp">

      <span class="type"><a href="../qtcore/qstringlist.html">QStringList</a></span> categories;
      categories <span class="operator">&lt;</span><span class="operator">&lt;</span> <span class="string">&quot;Jan&quot;</span> <span class="operator">&lt;</span><span class="operator">&lt;</span> <span class="string">&quot;Feb&quot;</span> <span class="operator">&lt;</span><span class="operator">&lt;</span> <span class="string">&quot;Mar&quot;</span> <span class="operator">&lt;</span><span class="operator">&lt;</span> <span class="string">&quot;Apr&quot;</span> <span class="operator">&lt;</span><span class="operator">&lt;</span> <span class="string">&quot;May&quot;</span> <span class="operator">&lt;</span><span class="operator">&lt;</span> <span class="string">&quot;Jun&quot;</span>;
      <span class="type"><a href="qbarcategoryaxis.html">QBarCategoryAxis</a></span> <span class="operator">*</span>axisX <span class="operator">=</span> <span class="keyword">new</span> <span class="type"><a href="qbarcategoryaxis.html">QBarCategoryAxis</a></span>();
      axisX<span class="operator">-</span><span class="operator">&gt;</span>append(categories);
      chart<span class="operator">-</span><span class="operator">&gt;</span>setAxisX(axisX<span class="operator">,</span> lineseries);
      chart<span class="operator">-</span><span class="operator">&gt;</span>setAxisX(axisX<span class="operator">,</span> barseries);
      axisX<span class="operator">-</span><span class="operator">&gt;</span>setRange(<span class="type"><a href="../qtcore/qstring.html">QString</a></span>(<span class="string">&quot;Jan&quot;</span>)<span class="operator">,</span> <span class="type"><a href="../qtcore/qstring.html">QString</a></span>(<span class="string">&quot;Jun&quot;</span>));

      <span class="type"><a href="qvalueaxis.html">QValueAxis</a></span> <span class="operator">*</span>axisY <span class="operator">=</span> <span class="keyword">new</span> <span class="type"><a href="qvalueaxis.html">QValueAxis</a></span>();
      chart<span class="operator">-</span><span class="operator">&gt;</span>setAxisY(axisY<span class="operator">,</span> lineseries);
      chart<span class="operator">-</span><span class="operator">&gt;</span>setAxisY(axisY<span class="operator">,</span> barseries);
      axisY<span class="operator">-</span><span class="operator">&gt;</span>setRange(<span class="number">0</span><span class="operator">,</span> <span class="number">20</span>);

</pre>
<p>And we also want to show the legend.</p>
<pre class="cpp">

      chart<span class="operator">-</span><span class="operator">&gt;</span>legend()<span class="operator">-</span><span class="operator">&gt;</span>setVisible(<span class="keyword">true</span>);
      chart<span class="operator">-</span><span class="operator">&gt;</span>legend()<span class="operator">-</span><span class="operator">&gt;</span>setAlignment(<span class="type"><a href="../qtcore/qt.html">Qt</a></span><span class="operator">::</span>AlignBottom);

</pre>
<p>Finally we add the chart onto a view.</p>
<pre class="cpp">

      <span class="type"><a href="qchartview.html">QChartView</a></span> <span class="operator">*</span>chartView <span class="operator">=</span> <span class="keyword">new</span> <span class="type"><a href="qchartview.html">QChartView</a></span>(chart);
      chartView<span class="operator">-</span><span class="operator">&gt;</span>setRenderHint(<span class="type"><a href="../qtgui/qpainter.html">QPainter</a></span><span class="operator">::</span>Antialiasing);

</pre>
<p>Now it is ready to be shown in a window.</p>
<pre class="cpp">

      <span class="type"><a href="../qtwidgets/qmainwindow.html">QMainWindow</a></span> window;
      window<span class="operator">.</span>setCentralWidget(chartView);
      window<span class="operator">.</span>resize(<span class="number">440</span><span class="operator">,</span> <span class="number">300</span>);
      window<span class="operator">.</span>show();

</pre>
<p>Files:</p>
<ul>
<li><a href="qtcharts-lineandbar-main-cpp.html">lineandbar/main.cpp</a></li>
<li><a href="qtcharts-lineandbar-lineandbar-pro.html">lineandbar/lineandbar.pro</a></li>
</ul>
</div>
<!-- @@@lineandbar -->
        </div>
       </div>
   </div>
   </div>
</div>
<div class="footer">
   <p>
   <acronym title="Copyright">&copy;</acronym> 2016 The Qt Company Ltd.
   Documentation contributions included herein are the copyrights of
   their respective owners.<br>    The documentation provided herein is licensed under the terms of the    <a href="http://www.gnu.org/licenses/fdl.html">GNU Free Documentation    License version 1.3</a> as published by the Free Software Foundation.<br>    Qt and respective logos are trademarks of The Qt Company Ltd.     in Finland and/or other countries worldwide. All other trademarks are property
   of their respective owners. </p>
</div>
</body>
</html>
